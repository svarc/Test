jQuery(document).ready(function(){if($("#dropzone").length){Dropzone.autoDiscover=!1;var e=window.location,o=e.protocol+"//"+e.host;console.log(o+"/api/upload_csv");new Dropzone("#dropzone",{autoProcessQueue:!0,uploadMultiple:!1,parallelUploads:1,paramName:"file",acceptedFiles:".csv",maxFilesize:null,maxFiles:1,chunking:!1,url:o+"/api/upload_csv",init:function(){this.on("addedfiles",function(e){$("#modal-progress").modal("toggle"),$(".modal-backdrop").css("opacity",1)}),this.on("success",function(e,o){$("#modal-progress").modal("toggle"),$(".modal-backdrop").css("opacity",.5),$("#modal-success").modal("toggle"),this.removeAllFiles(!0)}),this.on("error",function(e,o,a){$("#modal-progress").modal("toggle"),$(".modal-backdrop").css("opacity",.5),$("#modal-error").modal("toggle"),this.removeAllFiles(!0)})}})}if($(".clickable-row").click(function(){window.location=$(this).data("href")}),$("#filter").change(function(){if("week"==this.value)var e=weekly_scores,o=weekly_durations;else e=monthly_scores,o=monthly_durations;var a={exportEnabled:!0,animationEnabled:!0,axisX:{title:"Date"},axisY:{title:"Average User Score",titleFontColor:"#4F81BC",lineColor:"#4F81BC",labelFontColor:"#4F81BC",tickColor:"#4F81BC"},axisY2:{title:"Total Call Duration",titleFontColor:"#C0504E",lineColor:"#C0504E",labelFontColor:"#C0504E",tickColor:"#C0504E"},toolTip:{shared:!0},legend:{cursor:"pointer",itemclick:function(e){void 0===e.dataSeries.visible||e.dataSeries.visible?e.dataSeries.visible=!1:e.dataSeries.visible=!0;e.chart.render()}},data:[{type:"spline",name:"User Score",showInLegend:!0,xValueFormatString:"MMM YYYY",yValueFormatString:"#,##0 Units",dataPoints:e},{type:"spline",name:"Call Duration",axisYType:"secondary",showInLegend:!0,xValueFormatString:"MMM YYYY",yValueFormatString:"$#,##0.#",dataPoints:o}]};$("#chartContainer").CanvasJSChart(a)}),$("#chartContainer").length){var a={exportEnabled:!0,animationEnabled:!0,axisX:{title:"Date"},axisY:{title:"Average User Score",titleFontColor:"#4F81BC",lineColor:"#4F81BC",labelFontColor:"#4F81BC",tickColor:"#4F81BC"},axisY2:{title:"Total Call Duration",titleFontColor:"#C0504E",lineColor:"#C0504E",labelFontColor:"#C0504E",tickColor:"#C0504E"},toolTip:{shared:!0},legend:{cursor:"pointer",itemclick:function(e){void 0===e.dataSeries.visible||e.dataSeries.visible?e.dataSeries.visible=!1:e.dataSeries.visible=!0,e.chart.render()}},data:[{type:"spline",name:"User Score",showInLegend:!0,xValueFormatString:"MMM YYYY",yValueFormatString:"#,##0 Units",dataPoints:weekly_scores},{type:"spline",name:"Call Duration",axisYType:"secondary",showInLegend:!0,xValueFormatString:"MMM YYYY",yValueFormatString:"$#,##0.#",dataPoints:weekly_durations}]};$("#chartContainer").CanvasJSChart(a)}});
